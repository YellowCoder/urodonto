<% page_title 'Registro financeiro' %>

<button>
  <%= link_to "Novo registro", new_financial_record_path %>
</button>

<div class="financialRecordsList__wrapper">
  <table id="datatable" class="stripe">
    <thead>
        <tr>
            <th>Status</th>
            <th>Paciente</th>
            <th>Data venc</th>
            <th>Data Pgt</th>
            <th>Valor</th>
            <th>Consulta</th>
            <th>Ações</th>
        </tr>
    </thead>
    <tbody>
      <% @financial_records.each do |financial_record| %>
        <tr>
          <td><%= t("activerecord.attributes.financial_record.statuses.#{ financial_record.status }") %></td>
          <td><%= financial_record.appointment.patient.name %></td>
          <td><%= financial_record.due_date&.strftime('%d/%m/%Y') %></td>
          <td><%= financial_record.paid_at&.strftime('%d/%m/%Y') %></td>
          <td><%= financial_record.amount %></td>
          <td><%= link_to 'ver', appointment_path(financial_record.appointment) %></td>
          <td>
            <button><%= link_to "Detalhes", financial_record_path(financial_record) %></button>
            <button><%= link_to "Alterar", edit_financial_record_path(financial_record) %></button>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<% content_for(:javascript) do %>
  <script type='text/javascript'>
    InitializeDataTables({ order: [[0, 'desc']] })
  </script>
<% end %>